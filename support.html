<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AvalonFlow Support</title>
<style>
/* ---------- Base ---------- */
body { font-family: Arial, sans-serif; margin: 0; background: #0d0d0d; color: #fff; overflow-x: hidden; }
button { cursor: pointer; } 
a { color: inherit; text-decoration: none; }

/* ---------- Floating Background ---------- */
#floating-bg { position: fixed; inset: 0; z-index: 0; pointer-events: none; background: radial-gradient(circle at bottom, #1a0d3a, #0d0d0d); }

/* ---------- Sidebar ---------- */
#sidebar { position: fixed; top: 0; left: 0; width: 280px; height: 100%; background: rgba(15,15,25,0.95); backdrop-filter: blur(14px); z-index: 5; padding: 25px; transform: translateX(-100%); transition: transform 0.3s ease; }
#sidebar.open { transform: translateX(0); }
#sidebar h2 { color: #6b2cd8; margin-top: 0; }
#sidebar button { width: 100%; margin: 12px 0; padding: 12px; border: none; border-radius: 10px; background: rgba(255,255,255,0.1); color: #fff; font-size: 16px; }

/* ---------- Overlay ---------- */
#overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index: 4; display: none; }
#overlay.active { display: block; }

/* ---------- Content ---------- */
#content { position: relative; z-index: 1; padding: 40px; max-width: 1100px; margin: auto; padding-bottom: 120px; }

/* ---------- Glass Card ---------- */
.glass-card { background: rgba(255,255,255,0.12); backdrop-filter: blur(12px); border-radius: 18px; padding: 28px; box-shadow: 0 10px 30px rgba(0,0,0,0.35); }

/* ---------- Mini TV ---------- */
.mini-tv { background: rgba(0,0,0,0.45); border-radius: 14px; padding: 18px; margin: 18px 0; border: 1px solid rgba(107,44,216,0.35); font-size: 15px; min-height: 60px; display: flex; align-items: center; }

/* ---------- Buttons ---------- */
.button { background: #6b2cd8; color: #fff; border: none; border-radius: 10px; padding: 12px 18px; margin-top: 12px; width: 100%; font-size: 16px; }

/* ---------- Input ---------- */
.input { width: 100%; padding: 12px; border-radius: 10px; border: none; margin-top: 12px; background: rgba(255,255,255,0.15); color: #fff; }

/* ---------- Menu Button ---------- */
#menuBtn { position: fixed; top: 20px; left: 20px; z-index: 6; background: #6b2cd8; border: none; color: #fff; padding: 12px 14px; border-radius: 10px; }

/* ---------- Footer ---------- */
footer { position: fixed; bottom: 0; width: 100%; text-align: center; padding: 18px 0; font-size: 14px; color: #aaa; background: rgba(15,15,25,0.95); backdrop-filter: blur(12px); box-shadow: 0 -5px 20px rgba(0,0,0,0.4); z-index: 6; }

/* ---------- Notification ---------- */
.notification-bar { position: fixed; top: -80px; right: 20px; background: rgba(30,144,255,0.25); backdrop-filter: blur(12px); border: 1px solid rgba(30,144,255,0.4); color: #fff; padding: 12px 18px; border-radius: 12px; font-size: 14px; transition: top 0.5s ease; z-index: 9999; }
.notification-bar.show { top: 20px; }

/* ---------- Live Status Badge ---------- */
.status-badge { display: inline-flex; align-items: center; gap: 8px; padding: 8px 14px; border-radius: 20px; font-size: 14px; margin-bottom: 15px; }
.status-dot { width: 10px; height: 10px; border-radius: 50%; background: #00ff6a; box-shadow: 0 0 10px #00ff6a; }
.status-offline { background: #ccc; box-shadow: 0 0 5px #ccc; }

/* ---------- Assistant Bot Styles ---------- */
#assistantBot { position: fixed; bottom: 20px; right: 20px; width: 300px; max-height: 400px; background: rgba(30,30,45,0.95); backdrop-filter: blur(12px); border-radius: 18px; box-shadow: 0 8px 30px rgba(0,0,0,0.4); display: flex; flex-direction: column; overflow: hidden; z-index: 9999; font-family: 'Arial', sans-serif; }
#botHeader { background: #6b2cd8; color: #fff; text-align: center; padding: 10px; font-weight: bold; cursor: pointer; }
#botMessages { flex: 1; padding: 10px; overflow-y: auto; font-size: 14px; }
#botMessages .user { text-align: right; color: #9b59b6; margin-bottom: 6px; }
#botMessages .bot { text-align: left; color: #b3b3ff; margin-bottom: 6px; }
#botMessages .ambient { text-align: center; color: #aaa; font-size: 12px; opacity: 0.8; margin-bottom: 6px; }
#botInputContainer { display: flex; }
#botInput { flex: 1; border: none; border-top: 1px solid rgba(255,255,255,0.2); padding: 8px; background: rgba(255,255,255,0.05); color: #fff; }
#botSendBtn { width: 60px; border: none; background: #6b2cd8; color: #fff; cursor: pointer; border-radius: 6px; }
</style>
</head>
<body>

<div id="floating-bg"></div>
<button id="menuBtn" onclick="toggleSidebar()">‚ò∞</button>
<div id="supportNotification" class="notification-bar"></div>

<div id="sidebar">
    <h2>AvalonFlow</h2>
    <button onclick="nav('dashboard.html')">Dashboard</button>
    <button onclick="nav('ecosystem.html')">Ecosystem</button>
    <button onclick="nav('branches.html')">Branches</button>
    <button onclick="nav('rewards.html')">Rewards</button>
    <button onclick="nav('support.html')">Support</button>
    <button onclick="logout()">Logout</button>
</div>
<div id="overlay" onclick="toggleSidebar()"></div>

<div id="content">
    <div class="glass-card">
        <div class="status-badge">
            <span id="statusDot" class="status-dot"></span>
            <span id="statusText">Checking status...</span>
        </div>
        <p><strong>Behind every smooth interaction is a dedicated team member. üë©‚Äçüíºüíª</strong></p>
        <div class="mini-tv" id="miniTV"></div>
        <p>Generate a ticket reference before contacting support for faster resolution.</p>
        <input id="issueInput" class="input" placeholder="Brief issue description (optional)" />
        <button class="button" onclick="generateTicket()">Generate Ticket Reference</button>
        <p id="ticketResult" style="margin-top:15px;font-weight:bold;"></p>
        <a href="mailto:avalonflow@usa.com" class="button" onclick="notify('Include your ticket reference in the email.')">Email Support</a>
    </div>

    <!-- Assistant Bot -->
    <div id="assistantBot">
        <div id="botHeader">üí¨ Kairos Assistant</div>
        <div id="botMessages"></div>
        <div id="botInputContainer">
            <input type="text" id="botInput" placeholder="Ask me something..." />
            <button id="botSendBtn">Send</button>
        </div>
    </div>
</div>

<footer>¬© 2026 AvalonFlow | Powered by Centrical‚Ñ¢</footer>

<script>
/* ---------- Sidebar ---------- */
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
function toggleSidebar(){ sidebar.classList.toggle('open'); overlay.classList.toggle('active'); }
function nav(p){ location.href=p; }
function logout(){ location.href='index.html'; }

/* ---------- Notification ---------- */
function notify(msg){
    const n=document.getElementById('supportNotification');
    n.textContent=msg;
    n.classList.add('show');
    setTimeout(()=>n.classList.remove('show'),3000);
}

/* ---------- Ticket Generator ---------- */
function generateTicket(){
    const stamp=Date.now().toString().slice(-6);
    const rand=Math.random().toString(36).substring(2,6).toUpperCase();
    const ref=`AF-SUP-${stamp}-${rand}`;
    document.getElementById('ticketResult').textContent = `Ticket Reference: ${ref}`;
    notify('Ticket reference generated.');
}

/* ---------- Mini TV ---------- */
const tvMessages = [
    "Support desk is available to guide you through every step.",
    "Having issues? Generate a ticket reference before emailing.",
    "Clear communication speeds up resolution.",
    "Our support team is standing by."
];
let tvIndex = 0;
function rotateTV(){
    document.getElementById('miniTV').textContent = tvMessages[tvIndex];
    tvIndex = (tvIndex + 1) % tvMessages.length;
}
rotateTV();
setInterval(rotateTV, 4000);

/* ---------- Live Status ---------- */
function updateStatus(){
    const now = new Date();
    const estHour = (now.getUTCHours()-5+24)%24;
    const estDay = now.getUTCDay();
    const isOffice = (estDay>=1 && estDay<=5) && (estHour>=9 && estHour<18);
    const dot=document.getElementById('statusDot');
    const text=document.getElementById('statusText');
    if(isOffice){ dot.className='status-dot'; text.textContent='Support Desk Online'; }
    else { dot.className='status-dot status-offline'; text.textContent='Support Desk Offline'; }
}
updateStatus();
setInterval(updateStatus,60000);

/* ---------- Kairos Bot ---------- */
const botMessages = document.getElementById('botMessages');
const botInput = document.getElementById('botInput');
const botSendBtn = document.getElementById('botSendBtn');

const quotes = [
  "Believe in yourself and all that you are.",
  "Small steps each day lead to big results.",
  "Life is about moments, not things.",
  "Consistency is the key to success.",
  "Every day is a fresh start."
];

function addBotMessage(msg,type='bot'){
    const div = document.createElement('div');
    div.className = type;
    div.textContent = msg;
    botMessages.appendChild(div);
    botMessages.scrollTop = botMessages.scrollHeight;
    if(botMessages.children.length>10) botMessages.removeChild(botMessages.children[0]);
}

function addUserMessage(msg){ addBotMessage(msg,'user'); }

// Branch progress data
function getBranchProgress(){
    const unlocked = JSON.parse(localStorage.getItem('unlockedBranches')) || {};
    const unlockTimes = JSON.parse(localStorage.getItem('unlockTimes')) || {};
    const now = Date.now();
    let response = "Branch progress:\n";
    ['care','grow','ease'].forEach(branch=>{
        if(unlocked[branch]){
            const elapsed = now - unlockTimes[branch];
            const total = branch==='care'?14*24*60*60*1000:branch==='grow'?28*24*60*60*1000:42*24*60*60*1000;
            const percent = Math.min(100,Math.round((elapsed/total)*100));
            response += `${branch.charAt(0).toUpperCase()+branch.slice(1)}: ${percent}% completed\n`;
        } else response += `${branch.charAt(0).toUpperCase()+branch.slice(1)}: Locked\n`;
    });
    return response;
}

// Bot reply logic
function botReply(msg){
    msg = msg.toLowerCase();
    if(/hi|hello|hey|yo/.test(msg)){
        addBotMessage("Hi! I'm Kairos, your assistant. How can I help today?");
    } else if(msg.includes('who are you')||msg.includes('yourself')){
        addBotMessage("I‚Äôm Kairos, your guide through AvalonFlow. I provide tips, motivational quotes, and info about your rewards.");
    } else if(msg.includes('quote')){
        addBotMessage(quotes[Math.floor(Math.random()*quotes.length)]);
    } else if(msg.includes('reward')||msg.includes('progress')||msg.includes('branch')){
        addBotMessage(getBranchProgress());
    } else if(msg.includes('ticket')){
        addBotMessage("To generate a support ticket, type your issue and click 'Generate Ticket Reference'.");
    } else if(msg.includes('support')||msg.includes('help')){
        addBotMessage("You can email support at avalonflow@usa.com. Include your ticket reference.");
    } else {
        addBotMessage("I can provide tips, motivational quotes, info about AvalonFlow, or guide you to support.");
    }
}

// Send & enter key
botSendBtn.addEventListener('click', ()=>{
    const msg = botInput.value.trim();
    if(!msg) return;
    addUserMessage(msg);
    botInput.value='';
    setTimeout(()=>botReply(msg),500);
});
botInput.addEventListener('keypress', e=>{
    if(e.key==='Enter') botSendBtn.click();
});

// Ambient motivational messages (10s) only if user inactive
setInterval(()=>{
    if(!botMessages.querySelector('.user')){
        const ambientMsg = quotes[Math.floor(Math.random()*quotes.length)];
        const div = document.createElement('div');
        div.className='ambient';
        div.textContent = ambientMsg;
        div.style.opacity=0;
        botMessages.appendChild(div);
        botMessages.scrollTop=botMessages.scrollHeight;

        // fade-in
        let opacity=0;
        let fadeIn=setInterval(()=>{
            opacity+=0.05;
            div.style.opacity=opacity;
            if(opacity>=0.8) clearInterval(fadeIn);
        },50);

        // fade-out after 10s
        setTimeout(()=>{
            let fadeOut=setInterval(()=>{
                opacity-=0.05;
                div.style.opacity=opacity;
                if(opacity<=0){ clearInterval(fadeOut); div.remove(); }
            },50);
        },10000);
    }
},10000);

</script>
</body>
</html>